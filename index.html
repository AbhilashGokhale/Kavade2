<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kavade</title>
    <link rel="stylesheet" href="file.css">
</head>

<body>

    <div class="FrameDiv">
        <div class="Point_display" id="Point_display1"></div>

        <div class="LineDiv">
            <div class="Box" id="2"></div>
            <div class="Box" id="1"></div>
            <div class="Boxsafe" id="0">
                <div class="square border border-dark p-3" style="display: flex; flex-wrap: wrap;">
                    <div class="row">
                        <div class="col-6 ">
                            <div id="red_1" class="pawn pawn1" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 expand_pawn ">
                            <div id="red_2" class="pawn pawn1" onclick="MovePawn(this.id)"></div>
                        </div>
                        <div class="col-6 expand_pawn">
                            <div id="red_3" class="pawn pawn1" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div id="red_4" class="pawn pawn1" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Box" id="15"></div>
            <div class="Box" id="14"></div>
        </div>

        <div class="LineDiv">
            <div class="Box" id="3"></div>
            <div class="Box" id="22"></div>
            <div class="Box" id="23"></div>
            <div class="Box" id="16"></div>
            <div class="Box" id="13"></div>
        </div>

        <div class="LineDiv">
            <div class="Boxsafe" id="4">
                <div class="square border border-dark p-3" style="display: flex; flex-wrap: wrap;">
                    <div class="row">
                        <div class="col-6">
                            <div id="blue_1" class="pawn pawn2" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 expand_pawn">
                            <div id="blue_2" class="pawn pawn2" onclick="MovePawn(this.id)"></div>
                        </div>
                        <div class="col-6 expand_pawn">
                            <div id="blue_3" class="pawn pawn2" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div id="blue_4" class="pawn pawn2" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Box" id="21"></div>
            <div class="Boxsafe" id="24">
                <button class="roll_btn" id="roll_btn" type="button" onclick="Roll();"></button>
            </div>
            <div class="Box" id="17"></div>
            <div class="Boxsafe" id="12">
                <div class="square border border-dark p-3" style="display: flex; flex-wrap: wrap;">
                    <div class="row">
                        <div class="col-6">
                            <div id="black_1" class="pawn pawn3" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 expand_pawn">
                            <div id="black_2" class="pawn pawn3" onclick="MovePawn(this.id)"></div>
                        </div>
                        <div class="col-6 expand_pawn">
                            <div id="black_3" class="pawn pawn3" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div id="black_4" class="pawn pawn3" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="LineDiv">
            <div class="Box" id="5"></div>
            <div class="Box" id="20"></div>
            <div class="Box" id="19"></div>
            <div class="Box" id="18"></div>
            <div class="Box" id="11"></div>
        </div>

        <div class="LineDiv">
            <div class="Box" id="6"></div>
            <div class="Box" id="7"></div>
            <div class="Boxsafe" id="8">
                <div class="square border border-dark p-3" style="display: flex; flex-wrap: wrap;">
                    <div class="row">
                        <div class="col-6">
                            <div id="yellow_1" class="pawn pawn4" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 expand_pawn">
                            <div id="yellow_2" class="pawn pawn4" onclick="MovePawn(this.id)"></div>
                        </div>
                        <div class="col-6 expand_pawn">
                            <div id="yellow_3" class="pawn pawn4" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div id="yellow_4" class="pawn pawn4" onclick="MovePawn(this.id)"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Box" id="9"></div>
            <div class="Box" id="10"></div>
        </div>
        <div class="Point_display" id="Point_display2"></div>
    </div>
    <div id="win_pawns"></div>
    <script>
        var Roll_val = 0;
        function Roll() {
            document.getElementById('roll_btn').style.visibility = 'visible';
            Roll_val = parseInt(Math.random() * 16);

            if (Roll_val == 0 || Roll_val == 1 || Roll_val == 2 || Roll_val == 3) {
                Roll_val = 1;
            }
            else if (Roll_val == 4 || Roll_val == 5 || Roll_val == 6 || Roll_val == 7 || Roll_val == 8 || Roll_val == 9) {
                Roll_val = 2;
            }
            else if (Roll_val == 10 || Roll_val == 11 || Roll_val == 12 || Roll_val == 13) {
                Roll_val = 3;
            }
            else if (Roll_val == 14) {
                Roll_val = 4;
            }
            else if (Roll_val == 15) {
                Roll_val = 8;
            }

            if (Roll_val == 1 || Roll_val == 2 || Roll_val == 3) {
                document.getElementById('roll_btn').style.visibility = 'hidden';
            }

            var current_val = document.getElementById('Point_display1').innerHTML;
            if (current_val == 1 || current_val == 2 || current_val == 3 || current_val == "" || current_val == 0) {
                Roll_val = Roll_val
            }
            else {
                Roll_val = current_val.concat(' + ', Roll_val);
            }

            document.getElementById('Point_display1').innerHTML = Roll_val;
            document.getElementById('Point_display2').innerHTML = Roll_val;

        }


        function MovePawn(Pawn_id) {
            var visibility = document.getElementById('roll_btn').style.visibility;
            if (visibility == 'visible') {

                document.getElementById('roll_btn').classList.add('rotateable');
                document.getElementById('roll_btn').style.transform = 'scaleX(1.1)';
                setTimeout(function () {
                    document.getElementById('roll_btn').style.transform = 'scaleX(0.9)';
                    setTimeout(function () {
                        document.getElementById('roll_btn').style.transform = 'scaleX(1.1)';
                        setTimeout(function () {
                            document.getElementById('roll_btn').style.transform = 'scaleX(0.9)';
                            setTimeout(function () {
                                document.getElementById('roll_btn').style.transform = 'scaleX(1.1)';
                                setTimeout(function () {
                                    document.getElementById('roll_btn').style.transform = 'scaleX(0.9)';
                                    setTimeout(function () {
                                        document.getElementById('roll_btn').style.transform = 'scaleX(1)';
                                    }, 10);
                                }, 10);
                            }, 10);
                        }, 10);
                    }, 10);
                }, 10);
                return;
            }
            var current_val = document.getElementById('Point_display1').innerHTML; //get moves value
            //-------------------------------------------------------------------------------------------------------------------------------------
            if (current_val == "") {                                               // if empty set it to 0
                current_val = "0";
            };
            //-------------------------------------------------------------------------------------------------------------------------------------
            if (current_val.includes('+')) {                                       // If + is there split it and save it in a n array
                var current_vals = current_val.split('+');

                for (i = 0; i < current_vals.length; i++) {
                    current_vals[i] = current_vals[i].replaceAll(" ", "")
                }
            }
            else {
                current_vals = [current_val];
            };
            //-------------------------------------------------------------------------------------------------------------------------------------
            if (document.getElementById(Pawn_id).parentNode.id != "") {             // Get current position
                var current_pos = document.getElementById(Pawn_id).parentNode.id;
            }
            else {
                current_pos = document.getElementById(Pawn_id).parentNode.parentNode.parentNode.parentNode.id;
            }
            //-------------------------------------------------------------------------------------------------------------------------------------
            if (current_vals.length > 1) {                                                //Get correct value if there are multiple values
                while (!(current_vals.includes(current_value))) {
                    var current_value = prompt("Choose an option in  " + current_val.replaceAll("+", ","));
                }
            }
            else {
                current_value = current_vals[0];
            }
            //-------------------------------------------------------------------------------------------------------------------------------------
            var pawn_to_pos = parseInt(current_value) + parseInt(current_pos);  // Move pawn

            document.getElementById(pawn_to_pos).appendChild(document.getElementById(Pawn_id));

            //-------------------------------------------------------------------------------------------------------------------------------------
            var display_val = "";
            var first = 'X';
            if (current_vals.length > 1) {
                for (i = 0; i < current_vals.length; i++) {
                    if (current_vals[i] != current_value) {
                        if (first == 'X') {
                            display_val = display_val.concat(current_vals[i]);
                            first = ""
                        }
                        else {
                            display_val = display_val.concat(' + ', current_vals[i]);
                        }

                    };
                };
                document.getElementById('Point_display1').innerHTML = display_val;
                document.getElementById('Point_display2').innerHTML = display_val;

            }
            else {

                document.getElementById('Point_display1').innerHTML = "0";
                document.getElementById('Point_display2').innerHTML = "0";

                document.getElementById('roll_btn').style.visibility = 'visible';
            }
            if (document.getElementById(Pawn_id).parentNode.id == "24") {
                document.getElementById(Pawn_id).style.visibility = "hidden";
                document.getElementById(Pawn_id).style.border = "0px";
                document.getElementById(Pawn_id).style.margin = "0px";
                document.getElementById("win_pawns").appendChild(document.getElementById(Pawn_id));
            }
        }
    </script>
</body>

</html>